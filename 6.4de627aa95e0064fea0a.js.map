{"version":3,"sources":["webpack:///./src/views/english/keke/data.js","webpack:///./src/views/english/keke/index.js","webpack:///./src/views/english/keke/index.less","webpack:///./src/views/english/keke/index.less?78d6"],"names":["pageRoutePath","filters","label","name","required","message","placeholder","columns","title","dataIndex","render","text","record","index","_react_16_7_0_react_default","a","createElement","concat","style","width","cursor","src","onClick","Audio","play","key","is_checked","badge","className","status","Link","target","to","id","divider","type","searchButtonLoading","source","pagination","filterResult","k","x","i","current","size","_this$state","_this","state","pageSize","props","setValue","updateTable","page","_this$state2","objectSpread_default","values","_this$state3","Object","keys","forEach","item","_this$state4","Interceptor","setState","params","pageNo","get","then","res","total","count","data","map","success","catch","err","warn","errMsg","history","push","routePagePath","this","redux","showSizeChanger","onShowSizeChange","onPaginationSizeChange","onChange","onPaginationChange","showTotal","range","_this2","_this$state5","array","tableData","demo","marginBottom","es_button","filter","createItem","table","Component","connect","simpleWord","dispatch","value","module","exports","__webpack_require__","ePMt","e","t","n","content","hmr","transform","insertInto","locals"],"mappings":"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","file":"6.4de627aa95e0064fea0a.js","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Form,\n  Row,\n  Col,\n  Input,\n  Button,\n  Icon,\n  message,\n  Divider,\n  Tag,\n  Tooltip,\n  Pagination,\n  Popover,\n  Badge\n} from \"antd\";\nimport { HashRouter as Router, Switch, Route, Link } from \"react-router-dom\";\n\nimport { stringtomore, numbertostring } from \"util/tool\";\n\nconst pageRoutePath = \"/keke-english\";\nconst filters = [\n  {\n    label: \"单词\",\n    name: \"word\",\n    required: false,\n    message: \"请输入单词\",\n    placeholder: \"\"\n  },\n  {\n    label: \"注释\",\n    name: \"definition\",\n    required: false,\n    message: \"请输入单词\",\n    placeholder: \"\"\n  },\n  {\n    label: \"词库名称\",\n    name: \"collection_name\",\n    required: false,\n    message: \"请输入单词\",\n    placeholder: \"\"\n  },\n  {\n    label: \"词库关卡\",\n    name: \"collection_level\",\n    required: false,\n    message: \"请输入单词\",\n    placeholder: \"\"\n  }\n];\nconst columns = [\n  {\n    title: \"序号\",\n    dataIndex: \"id\"\n  },\n\n  {\n    title: \"单词\",\n    dataIndex: \"word\"\n  },\n  {\n    title: \"注释\",\n    dataIndex: \"definition\"\n  },\n\n  {\n    title: \"音标\",\n    dataIndex: \"phonetic_symbol\",\n    render: (text, record, index) => {\n      return <span>{`${text}`}</span>;\n    }\n  },\n  {\n    title: \"发音\",\n    dataIndex: \"pronunciation_url\",\n    render: (text, record, index) => {\n      return (\n        <img\n          style={{ width: 30, cursor: \"pointer\" }}\n          src=\"/images/sound.png\"\n          title={text}\n          onClick={() => {\n            let phonetic_sound = new Audio(text);\n            phonetic_sound.play();\n          }}\n        />\n      );\n    }\n  },\n  {\n    title: \"词库\",\n    dataIndex: \"collection_name\"\n  },\n  {\n    title: \"关卡\",\n    dataIndex: \"collection_level\"\n  },\n  {\n    title: \"操作\",\n    key: \"action\",\n    width: \"120px\",\n    render: (text, record) => (\n      <span>\n        {!record.is_checked ? null : (\n          <Badge className=\"yellow\" status=\"processing\" title=\"已审核\" />\n        )}\n\n        <Link target=\"_blank\" to={`${pageRoutePath}/detail?${record.id}`}>\n          详情\n        </Link>\n        <Divider type=\"vertical\" />\n        <Link to={`${pageRoutePath}/edit?${record.id}`}>编辑</Link>\n      </span>\n    )\n  }\n];\nconst etymaWord = text => (\n  <div>\n    {text.split(\"\\n\").map((i, key) => {\n      return <div key={key}>{i}</div>;\n    })}\n  </div>\n);\nconst imageHost = \"https://jiguangdanci.easylesson.cn\";\nconst imageHover = text => (\n  <div>\n    <img className=\"image-hover\" src={imageHost + text} alt=\"\" />\n  </div>\n);\nconst soundHover = text => (\n  <div>\n    <audio controls autoPlay className=\"audio\" src={imageHost + text} />\n  </div>\n);\n\nconst videoHover = text => (\n  <video width=\"250\" height=\"auto\" src={text} controls />\n);\n\nconst deleteItem = obj => {\n  log(obj);\n  obj.is_deleted = true;\n};\nexport { filters, columns };\n","import React, { Component } from \"react\";\nimport { setValue } from \"@/redux/simple-word\";\nimport { connect } from \"react-redux\";\nimport {\n  Form,\n  Row,\n  Col,\n  Input,\n  Button,\n  Icon,\n  message,\n  Divider,\n  Tag,\n  Tooltip,\n  Pagination,\n  Badge\n} from \"antd\";\nimport Filter from \"co/filter\";\nimport Table from \"co/table\";\nimport \"./index.less\";\nimport { get, post } from \"util/fetch\";\n\nimport { filters, columns } from \"./data\";\n\nconst routePath = \"/api/english/keke\";\nconst routePagePath = \"/keke-english\";\nclass index extends Component {\n  state = {\n    searchButtonLoading: false,\n    source: [],\n    pagination: {},\n    filterResult: {}\n  };\n\n  componentDidMount() {\n    const pagination = {\n      current: this.props.redux.pagination.current,\n      pageSize: this.props.redux.pagination.pageSize,\n      showSizeChanger: true,\n      onShowSizeChange: this.onPaginationSizeChange,\n      onChange: this.onPaginationChange,\n      // showTotal: (total, range) => `${range[0]}-${range[1]} of ${total} items `\n      showTotal: (total, range) => (\n        <div className=\"total\">\n          {`${range[0]}-${range[1]} of ${total} items`}{\" \"}\n          <span className=\"blank\" />\n          <Badge className=\"yellow\" status=\"processing\" text=\"代表已审核\" />\n        </div>\n      )\n    };\n    const { filterResult } = this.props.redux;\n    this.state.pagination = pagination;\n    this.state.filterResult = filterResult;\n    this.updateTable();\n  }\n  onPaginationSizeChange = (current, size) => {\n    let { pagination, filterResult } = this.state;\n    pagination.pageSize = size;\n    this.state.pagination = pagination;\n    this.props.setValue({ pagination });\n\n    this.updateTable();\n  };\n  onPaginationChange = (page, pageSize) => {\n    let { pagination, filterResult } = this.state;\n    pagination = { ...pagination, current: page, pageSize };\n    this.state.pagination = pagination;\n    this.props.setValue({ pagination });\n\n    this.updateTable();\n  };\n  filterResult = values => {\n    let { pagination, filterResult } = this.state;\n    pagination.current = 1;\n    filterResult = values;\n    Object.keys(filterResult).forEach(item => {\n      if (!filterResult[item]) {\n        filterResult[item] = \"\";\n      }\n    });\n    this.state.filterResult = filterResult;\n    this.props.setValue({ pagination, filterResult });\n    this.state.pagination = pagination;\n    this.updateTable();\n  };\n  updateTable = () => {\n    const { pagination, filterResult } = this.state;\n    if (!this.Interceptor()) {\n      return;\n    }\n    this.setState({\n      searchButtonLoading: true\n    });\n    let params = {\n      pageNo: pagination.current,\n      pageSize: pagination.pageSize,\n      ...filterResult\n    };\n    // params = Object.assign({}, params, values);\n    get(routePath, params)\n      .then(res => {\n        console.log(32, res);\n        // return;\n        pagination.total = res.count;\n        const source = (res.data || []).map((item, index) => {\n          const temp = {\n            key: item.id,\n            index: (pagination.current - 1) * pagination.pageSize + index + 1,\n            ...item\n          };\n          return temp;\n        });\n        this.setState({\n          searchButtonLoading: false,\n          source,\n          pagination\n        });\n        console.log(32, source);\n        message.success(\"查询成功\");\n      })\n      .catch(err => {\n        this.setState({\n          searchButtonLoading: false\n        });\n        console.log(32, err);\n        message.warn(err.errMsg);\n      });\n  };\n  Interceptor = () => {\n    return true;\n  };\n\n  createItem = () => {\n    this.props.history.push(routePagePath + \"/create\");\n  };\n  render() {\n    const {\n      searchButtonLoading,\n      source,\n      pagination,\n      filterResult\n    } = this.state;\n    const array = { filters, searchButtonLoading, values: filterResult };\n    const tableData = { columns, source, pagination };\n    const demo = (\n      <div style={{ marginBottom: 10 }}>\n        进入演示版：\n        <Button\n          onClick={() => {\n            this.props.history.push(\"/keke-english/demo\");\n          }}\n        >\n          点击\n        </Button>\n        <div>总共：{this.state.pagination.total}</div>\n      </div>\n    );\n    return (\n      <div className=\"regular-container\">\n        <Filter\n          array={array}\n          filterResult={this.filterResult}\n          createItem={this.createItem}\n        />\n        {demo}\n        <Table data={tableData} />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  redux: state.simpleWord\n});\nconst mapDispatchToProps = dispatch => {\n  return {\n    setValue: value => {\n      dispatch(setValue(value));\n    }\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(index);\n","exports = module.exports = require(\"../../../../node_modules/_css-loader@1.0.1@css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".table-collumn {\\n  width: 60px;\\n}\\n.stringtomore-collumn {\\n  cursor: pointer;\\n}\\n.image-hover {\\n  width: 100px;\\n  height: auto;\\n  border-radius: 10px;\\n}\\n.regular-container .yellow .ant-badge-status-processing {\\n  background-color: #52c41a;\\n}\\n.regular-container .ant-badge-status-processing::after {\\n  border: 1px solid #52c41a;\\n}\\n.regular-container .ant-table-pagination {\\n  width: 100%;\\n  display: flex;\\n  justify-content: flex-end;\\n  align-items: flex-start;\\n}\\n.regular-container .ant-pagination-total-text {\\n  float: left;\\n}\\n.regular-container .delete-tag {\\n  color: #1f8ffb;\\n  cursor: pointer;\\n  display: inline;\\n}\\n.regular-container .delete-tag[disabled] {\\n  color: gray;\\n}\\n.regular-container .total {\\n  display: inline;\\n}\\n.regular-container .total .blank {\\n  margin-right: 20px;\\n}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../../node_modules/_css-loader@1.0.1@css-loader/index.js!../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js!./index.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/_style-loader@0.23.1@style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/_css-loader@1.0.1@css-loader/index.js!../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js!./index.less\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/_css-loader@1.0.1@css-loader/index.js!../../../../node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js!./index.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}"],"sourceRoot":""}